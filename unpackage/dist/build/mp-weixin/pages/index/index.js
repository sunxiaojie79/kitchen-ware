"use strict";const e=require("../../common/vendor.js"),o=require("../../common/assets.js"),t={__name:"index",setup(t){const n=e.ref({}),i=()=>{const o=e.index.getStorageSync("userPhoneNumber")||"";e.index.showModal({title:"請輸入手機號碼",editable:!0,placeholderText:"請輸入手機號碼",content:o,success:function(o){if(o.confirm){const t=o.content;/^1[3-9]\d{9}$/.test(t)?(e.index.setStorageSync("userPhoneNumber",t),c(t)):(e.index.showToast({title:"請輸入正確的手機號碼",icon:"none"}),setTimeout((()=>{i()}),1500))}else e.index.showToast({title:"必須輸入手機號碼",icon:"none"}),setTimeout((()=>{i()}),1500)}})};e.onMounted((()=>{i()}));const c=async o=>{if(o)try{const t=await e.index.request({url:`http://47.83.19.236:80/prod-api/device/getDeviceByPhoneNumber/${o}`,method:"GET",header:{"Content-Type":"application/json"}});200===t.data.code?(t.data.data?n.value=t.data.data:e.index.showToast({title:"未獲取到設備",icon:"none"}),console.log(222,n.value)):e.index.showToast({title:"獲取設備失敗",icon:"none"})}catch(t){console.error("獲取設備錯誤:",t),e.index.showToast({title:"網絡請求失敗",icon:"none"})}else e.index.showToast({title:"手機號碼不能為空",icon:"none"})};return(t,i)=>e.e({a:n.value.deviceName},n.value.deviceName?{b:o._imports_0,c:e.t(n.value.deviceName),d:o._imports_1,e:e.o((o=>{return t=n.value,void e.index.navigateTo({url:`/pages/device-info/index?deviceName=${encodeURIComponent(t.deviceName)}&productKey=${encodeURIComponent(t.productKey)}&deviceSecret=${encodeURIComponent(t.deviceSecret)}`});var t}))}:{})}};wx.createPage(t);
