"use strict";const e=require("../../common/vendor.js"),a=require("../../common/assets.js"),t={__name:"index",setup(t){const o=e.ref([]),n=()=>{const a=getCurrentPages(),t=a[a.length-1];console.log("ğŸš€ ~ addDevice ~ currentPage1:",encodeURIComponent(decodeURIComponent(t.options.deviceSecret))),e.index.navigateTo({url:`/pages/device-add/index?productKey=${encodeURIComponent(decodeURIComponent(t.options.productKey))}&deviceSecret=${encodeURIComponent(decodeURIComponent(t.options.deviceSecret))}&deviceName=${encodeURIComponent(decodeURIComponent(t.options.deviceName))}`})},l=e=>{if(!e)return"0æ™‚0åˆ†";return`${Math.floor(e/60)}æ™‚${e%60}åˆ†`},d=async a=>{try{const t=await e.index.request({url:"https://yczmcj.com/prod-api/device/deviceProp",method:"GET",data:{deviceName:a},header:{"Content-Type":"application/json"}});console.log(111,t.data),200===t.data.code?o.value=[{label:"ç«ç¨®æ™‚é–“",value:l(t.data.data.sparkFireWorkMinutes)},{label:"ç´°ç«æ™‚é–“",value:l(t.data.data.smallFireWorkMinutes)},{label:"å¤§ç«æ™‚é–“",value:l(t.data.data.bigFireWorkMinutes)},{label:"ç’°ä¿ç«æ™‚é–“",value:l(t.data.data.epFireWorkMinutes)},{label:"é€²æ°´é‡",value:`${t.data.data.inflowWater}ç«‹æ–¹`},{label:"æ’æ°´æ¬¡æ•¸",value:`${t.data.data.drainCount}æ¬¡`},{label:"é»ç«å™¨",value:""+(0===t.data.data.igniter?"æ­£å¸¸":"ä¸æ­£å¸¸")},{label:"ç«ç¨®é–¥é–€",value:""+(0===t.data.data.sparkValve?"æ­£å¸¸":"ä¸æ­£å¸¸")},{label:"ç´°ç«é–¥",value:""+(0===t.data.data.smallFireValve?"æ­£å¸¸":"ä¸æ­£å¸¸")},{label:"å¤§ç«é–¥",value:""+(0===t.data.data.bigFireValve?"æ­£å¸¸":"ä¸æ­£å¸¸")},{label:"ç’°ä¿é–¥",value:""+(0===t.data.data.epFireValve?"æ­£å¸¸":"ä¸æ­£å¸¸")},{label:"æ’æ°´é–¥",value:""+(0===t.data.data.drainValve?"æ­£å¸¸":"ä¸æ­£å¸¸")}]:e.index.showToast({title:"ç²å–è¨­å‚™è©³æƒ…å¤±æ•—",icon:"none"})}catch(t){console.error("ç²å–è¨­å‚™è©³æƒ…éŒ¯èª¤:",t),e.index.showToast({title:"ç¶²çµ¡è«‹æ±‚å¤±æ•—",icon:"none"})}};let r=null;e.onMounted((()=>{const e=getCurrentPages();console.log("ğŸš€ ~ onMounted ~ pages:",e);const a=e[e.length-1],t=decodeURIComponent(a.options.deviceName);t&&(d(t),r=setInterval((()=>{d(t)}),5e3))})),e.onUnmounted((()=>{r&&clearInterval(r)}));const i=e=>e.split(/(\d+)/).filter(Boolean),c=e=>"æ­£å¸¸"===e||"ä¸æ­£å¸¸"===e;return(t,l)=>({a:a._imports_0$1,b:a._imports_1,c:a._imports_2,d:e.o(n),e:e.f(o.value,((a,t,o)=>{return e.e({a:e.t(a.label),b:c(a.value)},c(a.value)?{c:e.t(a.value),d:e.n((n=a.value,"æ­£å¸¸"===n?"status-normal":"status-abnormal"))}:{e:e.f(i(a.value),((a,t,o)=>{return{a:e.t(a),b:(n=a,/^\d+$/.test(n)?1:""),c:t};var n}))},{f:t});var n}))})}};wx.createPage(t);
