"use strict";const e=require("../../common/vendor.js"),a=require("../../common/assets.js"),t={__name:"index",setup(t){const o=e.ref([]),l=()=>{const a=getCurrentPages(),t=a[a.length-1];e.index.navigateTo({url:`/pages/device-add/index?productKey=${encodeURIComponent(t.options.productKey)}&deviceSecret=${encodeURIComponent(t.options.deviceSecret)}&deviceName=${encodeURIComponent(t.options.deviceName)}`})};e.onMounted((()=>{const a=getCurrentPages();console.log("🚀 ~ onMounted ~ pages:",a);const t=a[a.length-1],l=decodeURIComponent(t.options.deviceName);l&&(async a=>{try{const t=await e.index.request({url:"https://yczmcj.com/prod-api/device/deviceProp",method:"GET",data:{deviceName:a},header:{"Content-Type":"application/json"}});console.log(111,t.data),200===t.data.code?o.value=[{label:"火種時間",value:`${t.data.data.sparkFireWorkMinutes}分`},{label:"細火時間",value:`${t.data.data.smallFireWorkMinutes}分`},{label:"大火時間",value:`${t.data.data.bigFireWorkMinutes}分`},{label:"環保火時間",value:`${t.data.data.epFireWorkMinutes}分`},{label:"進水量",value:`${t.data.data.inflowWater}立方`},{label:"排水次數",value:`${t.data.data.drainCount}次`},{label:"引火器",value:0===t.data.data.igniter?"正常":"不正常"},{label:"火種閥門",value:0===t.data.data.sparkValve?"正常":"不正常"},{label:"細火閥",value:0===t.data.data.smallFireValve?"正常":"不正常"},{label:"大火閥",value:0===t.data.data.bigFireValve?"正常":"不正常"},{label:"環保閥",value:0===t.data.data.epFireValve?"正常":"不正常"},{label:"排水閥",value:0===t.data.data.drainValve?"正常":"不正常"}]:e.index.showToast({title:"獲取設備詳情失敗",icon:"none"})}catch(t){console.error("獲取設備詳情錯誤:",t),e.index.showToast({title:"網絡請求失敗",icon:"none"})}})(l)}));const n=e=>e.split(/(\d+)/).filter(Boolean),d=e=>"正常"===e||"不正常"===e;return(t,r)=>({a:a._imports_0$1,b:a._imports_1,c:a._imports_2,d:e.o(l),e:e.f(o.value,((a,t,o)=>{return e.e({a:e.t(a.label),b:d(a.value)},d(a.value)?{c:e.t(a.value),d:e.n((l=a.value,"正常"===l?"status-normal":"status-abnormal"))}:{e:e.f(n(a.value),((a,t,o)=>{return{a:e.t(a),b:(l=a,/^\d+$/.test(l)?1:""),c:t};var l}))},{f:t});var l}))})}};wx.createPage(t);
